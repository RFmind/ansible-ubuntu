---
- name: Ensure ash and git are installed
  apt:
    name: "{{item}}"
    state: present
  with_items:
    - zsh
    - git
  become: yes

- name: Clone oh-my-zsh
  git:
    repo: git://github.com/robbyrussel/oh-my-zsh.git
    dest: ~/.oh-my-zsh

- name: Create new ~/.zshrc
  copy:
    src: ~/oh-my-zsh/templates/zshrc.zsh-template
    dest: ~/.zshrc

- name: Change shell
  command: chsh -s /bin/zsh
  become: yes

